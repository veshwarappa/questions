SELECT
  mr.meeting_id,
  mr.region,
  mr.environment,
  mr.subject,
  mr.interviewee_email,
  mr.attendees,
  mr.event_date,
  mr.meeting_date,
  mr.start_time,
  mr.end_time,
  mr.created_at,
  mr.completed_at
FROM public.meeting_records mr
WHERE mr.environment = 'prod'
  AND mr.region = 'ANZ'
  AND (
        mr.subject ILIKE '%Louisa%'
     OR mr.subject ILIKE '%Quantium%'
     OR mr.subject ILIKE '%Internal Interview%'
  )
  AND (
        mr.event_date::text LIKE '2026-02-18%'
     OR mr.meeting_date::text LIKE '2026-02-18%'
     OR mr.completed_at::date = '2026-02-18'
  )
ORDER BY mr.created_at DESC;


SELECT
  mr.meeting_id,
  mr.subject,
  mr.event_date,
  mr.meeting_date,
  mr.start_time,
  mr.end_time,
  mr.created_at,
  mr.completed_at
FROM public.meeting_records mr
WHERE mr.environment = 'prod'
  AND mr.region = 'ANZ'
  AND (
        mr.subject ILIKE '%Louisa%'
     OR mr.subject ILIKE '%Quantium%'
     OR mr.subject ILIKE '%Internal Interview%'
  )
  AND (
        mr.completed_at >= '2026-02-17'::timestamp
    AND mr.completed_at <  '2026-02-20'::timestamp
  )
ORDER BY mr.completed_at DESC;

SELECT
  mr.meeting_id,
  mr.subject,
  mr.attendees,
  mr.event_date,
  mr.meeting_date,
  mr.completed_at
FROM public.meeting_records mr
WHERE mr.environment = 'prod'
  AND mr.region = 'ANZ'
  AND mr.attendees::text ILIKE '%priyanka.khurana@hays.com.au%'
  AND (
        mr.event_date::text LIKE '2026-02-18%'
     OR mr.meeting_date::text LIKE '2026-02-18%'
     OR mr.completed_at::date = '2026-02-18'
  )
ORDER BY mr.completed_at DESC;


SELECT
  t.meeting_id,
  t.subject,
  t.filename,
  t.meeting_date,
  t.start_date,
  t.transcript_available_at,
  t.retry_count,
  t.last_checked_at
FROM public.transcripts t
WHERE
  (t.subject ILIKE '%Louisa%' OR t.subject ILIKE '%Quantium%' OR t.filename ILIKE '%Louisa%' OR t.filename ILIKE '%Quantium%')
  AND (
        t.meeting_date::text LIKE '2026-02-18%'
     OR t.start_date::text LIKE '2026-02-18%'
     OR t.transcript_available_at::date = '2026-02-18'
  )
ORDER BY t.transcript_available_at DESC;


SELECT
  mr.meeting_id,
  mr.subject,
  mr.region,
  mr.interviewee_email,
  mr.attendees,
  mr.event_date,
  mr.meeting_date,
  mr.start_time,
  mr.end_time,
  mr.payload_submitted_at,
  mr.completed_at,
  t.transcript_available_at,
  t.retry_count,
  t.last_checked_at,
  ROUND(EXTRACT(EPOCH FROM (t.transcript_available_at - mr.completed_at))/60.0, 2) AS actual_processing_delay_min
FROM public.meeting_records mr
JOIN public.transcripts t ON t.meeting_id = mr.meeting_id
WHERE mr.meeting_id = '<PASTE_MEETING_ID_HERE>';
