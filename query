ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s contains "email"
   or Log_s contains "mail"
   or Log_s contains "send"
| where Log_s contains "error"
   or Log_s contains "exception"
   or Log_s contains "fail"
| project TimeGenerated, Log_s
| order by TimeGenerated desc

ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s contains "Sending review email"
| summarize count() by bin(TimeGenerated, 1d)
| order by TimeGenerated asc

ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s has "graph.microsoft.com" and (Log_s has "sendMail" or Log_s has "sendmail")
| project TimeGenerated, Log_s
| order by TimeGenerated asc

ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s has "graph.microsoft.com" and (Log_s has "sendMail" or Log_s has "sendmail")
| where Log_s has "429" or Log_s has "throttle" or Log_s has "TooManyRequests"
   or Log_s has "5"  // if your logs print 5xx codes
   or Log_s has "retry"
| project TimeGenerated, Log_s
| order by TimeGenerated asc


ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s has "Sending" and (Log_s has "email" or Log_s has "review email" or Log_s has "follow-up")
| project TimeGenerated, Log_s
| order by TimeGenerated asc


ContainerAppConsoleLogs_CL
| where TimeGenerated >= datetime(2026-02-01)
| where Log_s has "sendMail" or Log_s has "Sending review email"
| summarize sends=count() by bin(TimeGenerated, 1d)
| order by TimeGenerated asc
