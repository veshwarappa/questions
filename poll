select
  meeting_id,
  candidate_id,
  interview_id,
  contact_id,
  interviewee_email,
  interview_date,
  start_time,
  end_time,
  transcript_available_at
from transcripts
where join_url like '%meetup-join/19%3ameeting_%'
order by transcript_available_at desc;


select
  meeting_id,
  candidate_id,
  interview_id,
  contact_id,
  interviewee_email
from transcripts
where meeting_id = '<MEETING_ID>';


select
  meeting_id,
  submitted_payload::jsonb -> 'candidate' as candidate_json
from meeting_records
where meeting_id = '<MEETING_ID>';


select
  meeting_id,
  submitted_payload::jsonb #>> '{candidate,id}'    as payload_candidate_id,
  submitted_payload::jsonb #>> '{candidate,email}' as payload_candidate_email,
  submitted_payload::jsonb ->> 'interviewId'       as payload_interview_id,
  submitted_payload::jsonb ->> 'contactId'         as payload_contact_id,
  submitted_payload::jsonb ->> 'interviewDate'     as payload_interview_date,
  submitted_payload::jsonb ->> 'startTime'         as payload_start_time,
  submitted_payload::jsonb ->> 'endTime'           as payload_end_time
from meeting_records
where meeting_id = '<MEETING_ID>';


select
  meeting_id,
  submitted_payload::jsonb ->> 'candidate' as payload_candidate
from meeting_records
where meeting_id = '<MEETING_ID>';

select
  mr.meeting_id,

  -- from transcripts
  t.candidate_id  as t_candidate_id,
  t.interview_id  as t_interview_id,
  t.contact_id    as t_contact_id,
  t.interviewee_email as t_interviewee_email,

  -- from payload (edit fields once you confirm structure)
  mr.submitted_payload::jsonb #>> '{candidate,id}'    as p_candidate_id,
  mr.submitted_payload::jsonb ->> 'interviewId'       as p_interview_id,
  mr.submitted_payload::jsonb ->> 'contactId'         as p_contact_id

from meeting_records mr
join transcripts t on t.meeting_id = mr.meeting_id
where mr.meeting_id = '<MEETING_ID>';


select jsonb_object_keys(submitted_payload::jsonb)
from meeting_records
where meeting_id = '<MEETING_ID>';


select
  meeting_id,
  interview_id,
  candidate_id,
  interview_date,
  start_time,
  end_time,
  transcript_available_at
from transcripts
where interview_id = (select interview_id from transcripts where meeting_id = '<MEETING_ID>')
order by transcript_available_at desc;




