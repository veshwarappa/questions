select
  meeting_id,
  subject,
  region,
  environment,
  interviewee_email,
  event_date,
  start_time,
  end_time,
  created_at,
  payload_submitted_at,
  completed_at,
  processing_state,
  processing_duration_seconds
from public.meeting_records
where subject ilike '%testpriyanka%'
  and subject ilike '%OT test HBS%'
  and event_date like '%18/02/2026%'   -- adjust if stored as 2026-02-18
  and region in ('ANZ','AU','APAC','JP') -- keep AU/ANZ for this Sydney test
order by created_at desc
limit 20;


select
  meeting_id,
  subject,
  created_at,
  transcript_available_at,
  last_checked_at,
  retry_count,
  max_retries,
  processed,
  filename
from public.transcripts
where meeting_id = '<MEETING_ID>';

select
  mr.meeting_id,
  mr.subject,
  mr.region,
  mr.environment,
  mr.completed_at as meeting_completed_at,
  t.transcript_available_at,
  t.created_at as transcript_row_created_at,
  (t.transcript_available_at - mr.completed_at) as delay_end_to_available,
  (t.created_at - mr.completed_at) as delay_end_to_row_created,
  (t.transcript_available_at - t.created_at) as delay_row_created_to_available
from public.meeting_records mr
join public.transcripts t on t.meeting_id = mr.meeting_id
where mr.meeting_id = '<MEETING_ID>';


select
  id,
  meeting_record_id,
  step_name,
  step_type,
  status,
  started_at,
  completed_at,
  duration_seconds,
  trace_id,
  span_id
from public.pipeline_events
where meeting_record_id = '<MEETING_ID>'
order by started_at asc;


select
  pe.id,
  pe.meeting_record_id,
  mr.meeting_id,
  pe.step_name,
  pe.status,
  pe.started_at,
  pe.completed_at,
  pe.duration_seconds,
  pe.trace_id
from public.pipeline_events pe
join public.meeting_records mr
  on pe.meeting_record_id = mr.numerical_meeting_id  -- OR mr.meeting_id, OR another mapping
where mr.meeting_id = '<MEETING_ID>'
order by pe.started_at asc;


